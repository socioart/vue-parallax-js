"use strict";var window=global.window,document=global.document,ParallaxJS=function(t){var i=this;this.os=t,this.container=null,this._bindContainer=function(){i.container=document.querySelector(i.os.container)}};ParallaxJS.prototype={items:[],active:!0,tProp:window&&window.transformProp||function(){var t=document?document.createElement("div"):null;if(t&&null==t.style.transform){var i="Transform",e=!0,n=!1,o=void 0;try{for(var r,a=["Webkit","Moz","ms"][Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var l=r.value;if(void 0!==t.style[l+i])return l+i}}catch(t){n=!0,o=t}finally{try{!e&&a.return&&a.return()}finally{if(n)throw o}}}return"transform"}(),remove:function(t,i){var e=!0,n=!1,o=void 0;try{for(var r,a=this.items[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){r.value.el===t&&this.items.splice(this.items.indexOf(t),1)}}catch(t){n=!0,o=t}finally{try{!e&&a.return&&a.return()}finally{if(n)throw o}}},add:function(t,i){if(window){var e=i.value,n=i.arg,o=t.currentStyle||window.getComputedStyle(t),r=i.modifiers;if("none"!==o.display){var a=r.absY?window.innerHeight:t.clientHeight||t.scrollHeight,l=r.absY?window.innerWidth:t.clientWidth||t.scrollWidth,s=this.os.className;"string"==typeof s&&(t.className=(t.className+" "+s).trim()),this.items.push({el:t,iOT:t.offsetTop+t.offsetParent.offsetTop-parseInt(o.marginTop),style:o,value:e,arg:n,mod:r,height:a,width:l,count:0})}}},update:function(){window&&this.items.forEach(function(t){var i=t.el,e=i.currentStyle||window.getComputedStyle(i);t.height=t.mod.absY?window.innerHeight:i.clientHeight||i.scrollHeight,t.width=t.mod.absX?window.innerWidth:i.clientWidth||i.scrollWidth,null!==i.offsetParent&&(t.iOT=i.offsetTop+i.offsetParent.offsetTop-parseInt(e.marginTop))})},move:function(){var t=this;if(window&&this.active)if(window.innerWidth<this.os.minWidth)this.items.forEach(function(i){i.el.style[t.tProp]=""});else{var i=this.container?this.container.scrollTop:window.scrollY||window.pageYOffset,e=window.innerHeight,n=window.innerWidth;this.items.forEach(function(o){var r=o.height,a=o.width,l=-1*o.iOT*o.value,s=(i+e-r/2-e/2)*o.value+l,d=(i+n-a/2-n/2)*o.value+l;window.requestAnimationFrame(function(){var i=o.mod.centerX?"-50%":"0px",e=o.mod.horizontal?"translate3d("+d.toFixed(3)+"px,0px,0px)":"translate3d("+i+","+s.toFixed(3)+"px,0px)";o.el.style[t.tProp]=e})})}}};var vueParallaxJs={install:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(window){var e=new ParallaxJS(i);i.container?t.mixin({mounted:function(){this.$parent||(e._bindContainer(),e.container.addEventListener("scroll",function(){e.update(),e.move(e)},{passive:!0}))}}):window.addEventListener("scroll",function(){e.update(),e.move(e)},{passive:!0}),window.addEventListener("resize",function(){e.update(),e.move(e)},{passive:!0}),t.config.globalProperties.$parallaxjs=e,window.$parallaxjs=e,t.directive("parallax",{mounted:function(t,i){e.add(t,i),e.move(e)},unbind:function(t,i){e.remove(t,i)}})}}};module.exports=vueParallaxJs;
